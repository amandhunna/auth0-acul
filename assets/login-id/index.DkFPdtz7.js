import{j as e}from"../shared/react-vendor.BHI-8HNo.js";import{e as T,U as v,y as D,g as R,a as S,b as O,c as $,d as V,f as W,u as M,i as z,F as H,h as K,j as G,k as J,t as Q,l as X,m as Y,n as Z,o as _,C as ee,q as te,r as oe,s as se,v as ne,w as ae,x as I}from"../shared/common.qZetvTrg.js";import{B as re,D as ie,G as ce,y as le,z as de,I as ue,A as he}from"../shared/vendor.DMLuPfl3.js";const me={title:"Login",orText:"OR"},pe={title:"Welcome",description:"Log in to continue",logoAltText:"Application Logo"},xe={signupActionText:"Don't have an account?",signupActionLinkText:"Sign Up"},ge={passkeyButtonText:"Continue with a passkey",continueWithText:"Continue with",passkeyLabel:"Passkey"},ye={selectCountryPlaceholder:"Select Country",captchaLabel:"Enter the code shown above*",passwordLabel:"Password*",forgotPasswordLinkText:"Forgot password?",continueButtonText:"Continue"},Le={errorOccurred:"An error occurred",identifierRequired:"Identifier is required",passwordRequired:"Password is required",captchaCompletionRequired:"Please complete the CAPTCHA"},fe={page:me,heading:pe,footer:xe,alternativeLogins:ge,loginIdForm:ye,errors:Le},f=()=>{const o=re(),t=ie(),s=ce(),{alternateConnections:x}=s,{isCaptchaAvailable:d,texts:r,captcha:i,signupLink:u,resetPasswordLink:h}=t,{isSignupEnabled:m,isForgotPasswordEnabled:n,isPasskeyEnabled:a,showPasskeyAutofill:g,countryCode:c,countryPrefix:k}=s;return{loginId:o,handleLoginId:async p=>{const y={username:p.username.trim()};t.isCaptchaAvailable&&p?.captcha?.trim()&&(y.captcha=p?.captcha.trim());const L={...y};T(`Perform Login operation with options: ${JSON.stringify(L)}`,()=>o.login(y))},handleFederatedLogin:async p=>{T(`Perform Federated login with connection: ${p.connection}`,()=>o.federatedLogin(p))},handlePasskeyLogin:async()=>{a&&T("Perform passkey login",()=>o.passkeyLogin())},handlePickCountryCode:async()=>{T("Invoked Pick country code",()=>o.pickCountryCode())},texts:r,locales:fe,isSignupEnabled:m,isForgotPasswordEnabled:n,isPasskeyEnabled:a,showPasskeyAutofill:g,isCaptchaAvailable:d,captcha:i,alternateConnections:x,signupLink:u,resetPasswordLink:h,countryCode:c,countryPrefix:k}},Te=()=>{const{texts:o,locales:t,isPasskeyEnabled:s,showPasskeyAutofill:x,alternateConnections:d,handleFederatedLogin:r,handlePasskeyLogin:i}=f(),u=o?.passkeyButtonText||t?.alternativeLogins?.passkeyButtonText,h=n=>{const a={connection:n.name,...n.metadata||{}};r(a)},m=s&&!x;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 mt-2",children:[m&&e.jsx(v,{displayName:t?.alternativeLogins?.passkeyLabel,buttonText:u,iconComponent:e.jsx("span",{className:"text-primary",children:D()}),onClick:()=>i()},"passkey"),d?.map(n=>{if(!n?.name)return null;const{displayName:a,iconComponent:g}=R(n),c=`${t?.alternativeLogins?.continueWithText} ${a}`;return e.jsx(v,{displayName:a,buttonText:c,iconComponent:g,onClick:()=>h(n)},n.name)})]})})};function ke(){const{signupLink:o,texts:t,locales:s}=f();return o?e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:t?.signupActionText||s?.footer?.signupActionText}),e.jsx(S,{href:o,children:t?.signupActionLinkText||s?.footer?.signupActionLinkText})]}):null}function Ce(){const{texts:o,locales:t}=f(),s=o?.logoAltText||t?.heading?.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(O,{altText:s}),e.jsx($,{children:o?.title||t?.heading?.title}),e.jsx(V,{children:o?.description||t?.heading?.description})]})}function be(){const{texts:o,locales:t,captcha:s,countryCode:x,countryPrefix:d,resetPasswordLink:r,isCaptchaAvailable:i,isPasskeyEnabled:u,showPasskeyAutofill:h,handleLoginId:m,handlePickCountryCode:n}=f(),a=le(),g=W(a||void 0,o),c=de({defaultValues:{username:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:k}}=c,b=o?.captchaCodePlaceholder?`${o.captchaCodePlaceholder}*`:t?.loginIdForm?.captchaLabel,P=o?.forgotPasswordText||t?.loginIdForm?.forgotPasswordLinkText,j=o?.buttonText||t?.loginIdForm?.continueButtonText,{captchaConfig:C,captchaProps:p,captchaValue:y}=M(s||void 0,b);u&&h&&ue();const{errors:L,hasError:U,dismiss:E}=he(),w=L.byField("username")[0]?.message,N=L.byField("captcha")[0]?.message,F=L.byType("auth0").filter(l=>!l.field),B=z(a||[]),q=async l=>{await m({username:l.username,captcha:i&&y?y:void 0})};return e.jsx(H,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(q),children:[U&&F.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:F.map(l=>e.jsx(K,{variant:"destructive",onDismiss:()=>E(l.id),children:e.jsx(G,{children:l.message||t?.errors?.errorOccurred})},l.id))}),B&&e.jsx("div",{className:"mb-4",children:e.jsx(J,{selectedCountry:Q(x,d),onClick:n,fullWidth:!0,placeholder:t?.loginIdForm?.selectCountryPlaceholder})}),e.jsx(X,{control:c.control,name:"username",rules:{required:t?.errors?.identifierRequired},render:({field:l,fieldState:A})=>e.jsxs(Y,{children:[e.jsx(Z,{...l,label:g.label,type:g.type,autoComplete:g.autoComplete,autoFocus:!0,error:!!A.error||!!w}),e.jsx(_,{sdkError:w,hasFormError:!!A.error})]})}),i&&C&&e.jsx(ee,{control:c.control,name:"captcha",captcha:C,...p,sdkError:N,rules:{required:t?.errors?.captchaCompletionRequired}}),r&&e.jsx("div",{className:"mb-4 mt-2 text-left",children:e.jsx(S,{href:r,children:P})}),e.jsx(te,{type:"submit",className:"w-full",disabled:k,children:j})]})})}function Fe(){const{loginId:o,texts:t,locales:s,isPasskeyEnabled:x,alternateConnections:d}=f(),r=x||d&&d.length>0,i=t?.separatorText||s?.page?.orText;document.title=t?.pageTitle||s?.page?.title,oe(o);const u=se("--ul-theme-widget-social-buttons-layout"),h=m=>e.jsxs(e.Fragment,{children:[m==="bottom"&&r&&e.jsx(I,{text:i}),e.jsx(Te,{}),m==="top"&&r&&e.jsx(I,{text:i})]});return e.jsx(ne,{className:"theme-universal",children:e.jsxs(ae,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(Ce,{}),u==="top"&&h("top"),e.jsx(be,{}),e.jsx(ke,{}),u==="bottom"&&h("bottom")]})})}export{Fe as default};
//# sourceMappingURL=index.DkFPdtz7.js.map
