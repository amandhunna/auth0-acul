import{K as z,h as B,J as e,W as $,H as O,m as R,A as W,v as D,q as b,$ as v,X as H,e as J,Z as K,r as V,l as G,a as X,s as Y,w as Z,n as U,o as _,t as ee,b as te,c as se,M as ae,i as ne,D as oe,O as ie,E as re,f as le,j as ce,k as E,P as de,Y as F,y as ue,G as he}from"../main.Djz6zPDK.js";const pe={title:"Login",orText:"OR"},me={title:"Welcome",description:"Log in to continue",logoAltText:"Application Logo"},xe={signupActionText:"Don't have an account?",signupActionLinkText:"Sign Up"},ge={passkeyButtonText:"Continue with a passkey",continueWithText:"Continue with",passkeyLabel:"Passkey"},ye={selectCountryPlaceholder:"Select Country",captchaLabel:"Enter the code shown above*",passwordLabel:"Password*",forgotPasswordLinkText:"Forgot password?",continueButtonText:"Continue"},fe={errorOccurred:"An error occurred",identifierRequired:"Identifier is required",passwordRequired:"Password is required",captchaCompletionRequired:"Please complete the CAPTCHA"},be={page:pe,heading:me,footer:xe,alternativeLogins:ge,loginIdForm:ye,errors:fe},f=()=>{const s=R(),t=W(),a=D(),{alternateConnections:x}=a,{isCaptchaAvailable:d,texts:i,captcha:r,signupLink:u,resetPasswordLink:h}=t,{isSignupEnabled:p,isForgotPasswordEnabled:n,isPasskeyEnabled:o,showPasskeyAutofill:g,countryCode:l,countryPrefix:k}=a;return{loginId:s,handleLoginId:async m=>{const y={username:m.username.trim()};t.isCaptchaAvailable&&m?.captcha?.trim()&&(y.captcha=m?.captcha.trim());const C={...y};b(`Perform Login operation with options: ${JSON.stringify(C)}`,()=>s.login(y))},handleFederatedLogin:async m=>{b(`Perform Federated login with connection: ${m.connection}`,()=>s.federatedLogin(m))},handlePasskeyLogin:async()=>{o&&b("Perform passkey login",()=>s.passkeyLogin())},handlePickCountryCode:async()=>{b("Invoked Pick country code",()=>s.pickCountryCode())},texts:i,locales:be,isSignupEnabled:p,isForgotPasswordEnabled:n,isPasskeyEnabled:o,showPasskeyAutofill:g,isCaptchaAvailable:d,captcha:r,alternateConnections:x,signupLink:u,resetPasswordLink:h,countryCode:l,countryPrefix:k}},ke=()=>{const{texts:s,locales:t,isPasskeyEnabled:a,showPasskeyAutofill:x,alternateConnections:d,handleFederatedLogin:i,handlePasskeyLogin:r}=f(),u=s?.passkeyButtonText||t?.alternativeLogins?.passkeyButtonText,h=n=>{const o={connection:n.name,...n.metadata||{}};i(o)},p=a&&!x;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 mt-2",children:[p&&e.jsx(F,{displayName:t?.alternativeLogins?.passkeyLabel,buttonText:u,iconComponent:e.jsx("span",{className:"text-primary",children:ue()}),onClick:()=>r()},"passkey"),d?.map(n=>{if(!n?.name)return null;const{displayName:o,iconComponent:g}=he(n),l=`${t?.alternativeLogins?.continueWithText} ${o}`;return e.jsx(F,{displayName:o,buttonText:l,iconComponent:g,onClick:()=>h(n)},n.name)})]})})};function Ce(){const{signupLink:s,texts:t,locales:a}=f();return s?e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:t?.signupActionText||a?.footer?.signupActionText}),e.jsx(E,{href:s,children:t?.signupActionLinkText||a?.footer?.signupActionLinkText})]}):null}function Pe(){const{texts:s,locales:t}=f(),a=s?.logoAltText||t?.heading?.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(H,{altText:a}),e.jsx(J,{children:s?.title||t?.heading?.title}),e.jsx(K,{children:s?.description||t?.heading?.description})]})}function je(){const{texts:s,locales:t,captcha:a,countryCode:x,countryPrefix:d,resetPasswordLink:i,isCaptchaAvailable:r,isPasskeyEnabled:u,showPasskeyAutofill:h,handleLoginId:p,handlePickCountryCode:n}=f(),o=V(),g=G(o||void 0,s),l=X({defaultValues:{username:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:k}}=l,m=s?.captchaCodePlaceholder?`${s.captchaCodePlaceholder}*`:t?.loginIdForm?.captchaLabel,y=s?.forgotPasswordText||t?.loginIdForm?.forgotPasswordLinkText,C=s?.buttonText||t?.loginIdForm?.continueButtonText,{captchaConfig:j,captchaProps:N,captchaValue:L}=Y(a||void 0,m);u&&h&&Z();const{errors:P,hasError:q,dismiss:I}=U(),T=P.byField("username")[0]?.message,S=P.byField("captcha")[0]?.message,w=P.byType("auth0").filter(c=>!c.field),Q=_(o||[]),M=async c=>{await p({username:c.username,captcha:r&&L?L:void 0})};return e.jsx(ee,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(M),children:[q&&w.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:w.map(c=>e.jsx(te,{variant:"destructive",onDismiss:()=>I(c.id),children:e.jsx(se,{children:c.message||t?.errors?.errorOccurred})},c.id))}),Q&&e.jsx("div",{className:"mb-4",children:e.jsx(ae,{selectedCountry:ne(x,d),onClick:n,fullWidth:!0,placeholder:t?.loginIdForm?.selectCountryPlaceholder})}),e.jsx(oe,{control:l.control,name:"username",rules:{required:t?.errors?.identifierRequired},render:({field:c,fieldState:A})=>e.jsxs(ie,{children:[e.jsx(re,{...c,label:g.label,type:g.type,autoComplete:g.autoComplete,autoFocus:!0,error:!!A.error||!!T}),e.jsx(le,{sdkError:T,hasFormError:!!A.error})]})}),r&&j&&e.jsx(ce,{control:l.control,name:"captcha",captcha:j,...N,sdkError:S,rules:{required:t?.errors?.captchaCompletionRequired}}),i&&e.jsx("div",{className:"mb-4 mt-2 text-left",children:e.jsx(E,{href:i,children:y})}),e.jsx(de,{type:"submit",className:"w-full",disabled:k,children:C})]})})}function Te(){const{loginId:s,texts:t,locales:a,isPasskeyEnabled:x,alternateConnections:d}=f(),i=x||d&&d.length>0,r=t?.separatorText||a?.page?.orText;document.title=t?.pageTitle||a?.page?.title,z(s);const u=B("--ul-theme-widget-social-buttons-layout"),h=p=>e.jsxs(e.Fragment,{children:[p==="bottom"&&i&&e.jsx(v,{text:r}),e.jsx(ke,{}),p==="top"&&i&&e.jsx(v,{text:r})]});return e.jsx($,{className:"theme-universal",children:e.jsxs(O,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(Pe,{}),u==="top"&&h("top"),e.jsx(je,{}),e.jsx(Ce,{}),u==="bottom"&&h("bottom")]})})}export{Te as default};
//# sourceMappingURL=index.C-oMrjE8.DnWUoh52.BqEhs2ue.AX68zC2S.Bndbm3Ps.js.map
