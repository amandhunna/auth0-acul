import{E as _,S as O,Q as e,N as V,k as $,_ as D,v as U,x as W,a as k,T as A,I as K,R as M,L as Q,b as z,D as G,s as X,O as H,m as J,c as Y,K as Z,V as ee,d as te,B as se,r as ae,G as oe,e as ne,X as ie,M as re,f as le,h as ce,A as E,n as de,i as F,j as ue,P as he}from"../main.QRRYrZzl.js";const pe={title:"Login",orText:"OR"},xe={title:"Welcome",description:"Log in to continue",logoAltText:"Application Logo"},me={signupActionText:"Don't have an account?",signupActionLinkText:"Sign Up"},ge={passkeyButtonText:"Continue with a passkey",continueWithText:"Continue with",passkeyLabel:"Passkey"},ye={selectCountryPlaceholder:"Select Country",captchaLabel:"Enter the code shown above*",passwordLabel:"Password*",forgotPasswordLinkText:"Forgot password?",continueButtonText:"Continue"},fe={errorOccurred:"An error occurred",identifierRequired:"Identifier is required",passwordRequired:"Password is required",captchaCompletionRequired:"Please complete the CAPTCHA"},ke={page:pe,heading:xe,footer:me,alternativeLogins:ge,loginIdForm:ye,errors:fe},f=()=>{const s=D(),t=U(),a=W(),{alternateConnections:m}=a,{isCaptchaAvailable:d,texts:i,captcha:r,signupLink:u,resetPasswordLink:h}=t,{isSignupEnabled:p,isForgotPasswordEnabled:o,isPasskeyEnabled:n,showPasskeyAutofill:g,countryCode:l,countryPrefix:b}=a;return{loginId:s,handleLoginId:async x=>{const y={username:x.username.trim()};t.isCaptchaAvailable&&x?.captcha?.trim()&&(y.captcha=x?.captcha.trim());const C={...y};k(`Perform Login operation with options: ${JSON.stringify(C)}`,()=>s.login(y))},handleFederatedLogin:async x=>{k(`Perform Federated login with connection: ${x.connection}`,()=>s.federatedLogin(x))},handlePasskeyLogin:async()=>{n&&k("Perform passkey login",()=>s.passkeyLogin())},handlePickCountryCode:async()=>{k("Invoked Pick country code",()=>s.pickCountryCode())},texts:i,locales:ke,isSignupEnabled:p,isForgotPasswordEnabled:o,isPasskeyEnabled:n,showPasskeyAutofill:g,isCaptchaAvailable:d,captcha:r,alternateConnections:m,signupLink:u,resetPasswordLink:h,countryCode:l,countryPrefix:b}},be=()=>{const{texts:s,locales:t,isPasskeyEnabled:a,showPasskeyAutofill:m,alternateConnections:d,handleFederatedLogin:i,handlePasskeyLogin:r}=f(),u=s?.passkeyButtonText||t?.alternativeLogins?.passkeyButtonText,h=o=>{const n={connection:o.name,...o.metadata||{}};i(n)},p=a&&!m;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 mt-2",children:[p&&e.jsx(F,{displayName:t?.alternativeLogins?.passkeyLabel,buttonText:u,iconComponent:e.jsx("span",{className:"text-primary",children:ue()}),onClick:()=>r()},"passkey"),d?.map(o=>{if(!o?.name)return null;const{displayName:n,iconComponent:g}=he(o),l=`${t?.alternativeLogins?.continueWithText} ${n}`;return e.jsx(F,{displayName:n,buttonText:l,iconComponent:g,onClick:()=>h(o)},o.name)})]})})};function Ce(){const{signupLink:s,texts:t,locales:a}=f();return s?e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:t?.signupActionText||a?.footer?.signupActionText}),e.jsx(E,{href:s,children:t?.signupActionLinkText||a?.footer?.signupActionLinkText})]}):null}function Pe(){const{texts:s,locales:t}=f(),a=s?.logoAltText||t?.heading?.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(K,{altText:a}),e.jsx(M,{children:s?.title||t?.heading?.title}),e.jsx(Q,{children:s?.description||t?.heading?.description})]})}function je(){const{texts:s,locales:t,captcha:a,countryCode:m,countryPrefix:d,resetPasswordLink:i,isCaptchaAvailable:r,isPasskeyEnabled:u,showPasskeyAutofill:h,handleLoginId:p,handlePickCountryCode:o}=f(),n=z(),g=G(n||void 0,s),l=X({defaultValues:{username:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:b}}=l,x=s?.captchaCodePlaceholder?`${s.captchaCodePlaceholder}*`:t?.loginIdForm?.captchaLabel,y=s?.forgotPasswordText||t?.loginIdForm?.forgotPasswordLinkText,C=s?.buttonText||t?.loginIdForm?.continueButtonText,{captchaConfig:j,captchaProps:N,captchaValue:L}=H(a||void 0,x);u&&h&&J();const{errors:P,hasError:I,dismiss:S}=Y(),T=P.byField("username")[0]?.message,q=P.byField("captcha")[0]?.message,w=P.byType("auth0").filter(c=>!c.field),B=Z(n||[]),R=async c=>{await p({username:c.username,captcha:r&&L?L:void 0})};return e.jsx(ee,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(R),children:[I&&w.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:w.map(c=>e.jsx(te,{variant:"destructive",onDismiss:()=>S(c.id),children:e.jsx(se,{children:c.message||t?.errors?.errorOccurred})},c.id))}),B&&e.jsx("div",{className:"mb-4",children:e.jsx(ae,{selectedCountry:oe(m,d),onClick:o,fullWidth:!0,placeholder:t?.loginIdForm?.selectCountryPlaceholder})}),e.jsx(ne,{control:l.control,name:"username",rules:{required:t?.errors?.identifierRequired},render:({field:c,fieldState:v})=>e.jsxs(ie,{children:[e.jsx(re,{...c,label:g.label,type:g.type,autoComplete:g.autoComplete,autoFocus:!0,error:!!v.error||!!T}),e.jsx(le,{sdkError:T,hasFormError:!!v.error})]})}),r&&j&&e.jsx(ce,{control:l.control,name:"captcha",captcha:j,...N,sdkError:q,rules:{required:t?.errors?.captchaCompletionRequired}}),i&&e.jsx("div",{className:"mb-4 mt-2 text-left",children:e.jsx(E,{href:i,children:y})}),e.jsx(de,{type:"submit",className:"w-full",disabled:b,children:C})]})})}function Te(){const{loginId:s,texts:t,locales:a,isPasskeyEnabled:m,alternateConnections:d}=f(),i=m||d&&d.length>0,r=t?.separatorText||a?.page?.orText;document.title=t?.pageTitle||a?.page?.title,_(s);const u=O("--ul-theme-widget-social-buttons-layout"),h=p=>e.jsxs(e.Fragment,{children:[p==="bottom"&&i&&e.jsx(A,{text:r}),e.jsx(be,{}),p==="top"&&i&&e.jsx(A,{text:r})]});return e.jsx(V,{className:"theme-universal",children:e.jsxs($,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(Pe,{}),u==="top"&&h("top"),e.jsx(je,{}),e.jsx(Ce,{}),u==="bottom"&&h("bottom")]})})}export{Te as default};
//# sourceMappingURL=index.C-oMrjE8.DnWUoh52.js.map
