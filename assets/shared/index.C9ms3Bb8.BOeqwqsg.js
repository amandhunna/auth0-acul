import{E as V,S as z,Q as e,N as I,k as U,z as W,F as K,U as M,a as C,T as L,I as Q,R as G,L as H,b as X,D as _,s as J,O as Y,c as Z,K as ee,V as te,d as re,B as oe,r as se,G as ae,e as P,X as k,M as ne,f as v,g as ie,h as le,A,n as ce,P as de,i as ue}from"../main.QRRYrZzl.js";const pe={title:"Login",orText:"OR"},he={title:"Welcome",description:"Log in to continue",logoAltText:"Application Logo"},me={signupActionText:"Don't have an account?",signupActionLinkText:"Sign Up"},xe={continueWithText:"Continue with"},ge={selectCountryPlaceholder:"Select Country",captchaLabel:"CAPTCHA*",passwordLabel:"Password*",forgotPasswordLinkText:"Forgot password?",continueButtonText:"Continue"},fe={errorOccurred:"An error occurred",identifierRequired:"Identifier is required",passwordRequired:"Password is required",captchaCompletionRequired:"Please complete the CAPTCHA"},Ce={page:pe,heading:he,footer:me,alternativeLogins:xe,loginForm:ge,errors:fe},x=()=>{const r=W(),t=K(),s=M(),{alternateConnections:d,countryCode:o,countryPrefix:a}=s,{isCaptchaAvailable:c,captcha:u,texts:p,links:h}=t;return{login:r,handleLogin:async i=>{const l={username:i.username.trim(),password:i.password.trim()};t.isCaptchaAvailable&&i.captcha?.trim()&&(l.captcha=i.captcha.trim());const f={...l,password:"[REDACTED]"};C(`Perform Login operation with options: ${JSON.stringify(f)}`,()=>r.login(l))},handleFederatedLogin:async i=>{C(`Perform federated login with connection: ${i.connection}`,()=>r.federatedLogin(i))},handlePickCountryCode:async()=>{C("Invoked Pick country code",()=>r.pickCountryCode())},texts:p,locales:Ce,isCaptchaAvailable:c,alternateConnections:d,captcha:u,resetPasswordLink:h?.reset_password,signupLink:h?.signup,countryCode:o,countryPrefix:a}},je=()=>{const{locales:r,alternateConnections:t,handleFederatedLogin:s}=x(),d=o=>{const a={connection:o.name,...o.metadata||{}};s(a)};return!t||t.length===0?null:e.jsx("div",{className:"space-y-3 mt-2",children:t.map(o=>{if(!o?.name)return null;const{displayName:a,iconComponent:c}=de(o),u=`${r?.alternativeLogins?.continueWithText} ${a}`;return e.jsx(ue,{displayName:a,buttonText:u,iconComponent:c,onClick:()=>d(o)},o.name)})})};function ye(){const{texts:r,locales:t,signupLink:s}=x();return s?e.jsxs("div",{className:"mt-6 text-left",children:[e.jsxs("span",{className:"text-sm theme-universal:text-body-text theme-universal:text-(length:--ul-theme-font-body-text-size) theme-universal:font-body-text",children:[r?.signupActionText||t?.footer?.signupActionText," "]}),e.jsx(A,{href:s,children:r?.signupActionLinkText||t?.footer?.signupActionLinkText})]}):null}function be(){const{texts:r,locales:t}=x(),s=r?.logoAltText||t?.heading?.logoAltText;return e.jsxs(e.Fragment,{children:[e.jsx(Q,{altText:s}),e.jsx(G,{children:r?.title||t?.heading?.title}),e.jsx(H,{className:"mb-6",children:r?.description||t?.heading?.description})]})}function we(){const{texts:r,locales:t,captcha:s,countryCode:d,countryPrefix:o,resetPasswordLink:a,isCaptchaAvailable:c,handleLogin:u,handlePickCountryCode:p}=x(),h=X(),i=_(h||void 0,r),l=J({defaultValues:{username:"",password:"",captcha:""},reValidateMode:"onBlur"}),{formState:{isSubmitting:f}}=l,F=r?.captchaCodePlaceholder?`${r.captchaCodePlaceholder}*`:t?.loginForm?.captchaLabel,N=r?.passwordPlaceholder?`${r.passwordPlaceholder}*`:t?.loginForm?.passwordLabel,q=r?.forgotPasswordText||t?.loginForm?.forgotPasswordLinkText,E=r?.buttonText||t?.loginForm?.continueButtonText,{captchaConfig:j,captchaProps:R,captchaValue:y}=Y(s||void 0,F),{errors:g,hasError:S,dismiss:D}=Z(),b=g.byField("username")[0]?.message,w=g.byField("password")[0]?.message,O=g.byField("captcha")[0]?.message,T=g.byType("auth0").filter(n=>!n.field),B=ee(h||[]),$=async n=>{await u({username:n.username,password:n.password,captcha:c&&y?y:void 0})};return e.jsx(te,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit($),children:[S&&T.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:T.map(n=>e.jsx(re,{variant:"destructive",onDismiss:()=>D(n.id),children:e.jsx(oe,{children:n.message||t?.errors?.errorOccurred})},n.id))}),B&&e.jsx("div",{className:"mb-4",children:e.jsx(se,{selectedCountry:ae(d,o),onClick:p,fullWidth:!0,placeholder:t?.loginForm?.selectCountryPlaceholder})}),e.jsx(P,{control:l.control,name:"username",rules:{required:t?.errors?.identifierRequired},render:({field:n,fieldState:m})=>e.jsxs(k,{children:[e.jsx(ne,{...n,label:i.label,type:i.type,autoComplete:i.autoComplete,autoFocus:!0,error:!!m.error||!!b}),e.jsx(v,{sdkError:b,hasFormError:!!m.error})]})}),e.jsx(P,{control:l.control,name:"password",rules:{required:t?.errors?.passwordRequired},render:({field:n,fieldState:m})=>e.jsxs(k,{children:[e.jsx(ie,{...n,label:N,autoComplete:"current-password",error:!!m.error||!!w}),e.jsx(v,{sdkError:w,hasFormError:!!m.error})]})}),c&&j&&e.jsx(le,{control:l.control,name:"captcha",captcha:j,...R,sdkError:O,rules:{required:t?.errors?.captchaCompletionRequired}}),a&&e.jsx("div",{className:"mb-4 mt-2 text-left",children:e.jsx(A,{href:a,children:q})}),e.jsx(ce,{type:"submit",className:"w-full",disabled:f,children:E})]})})}function Le(){const{login:r,texts:t,locales:s,alternateConnections:d}=x(),o=d&&d.length>0,a=t?.separatorText||s?.page?.orText;document.title=t?.pageTitle||s?.page?.title,V(r);const c=z("--ul-theme-widget-social-buttons-layout"),u=p=>e.jsxs(e.Fragment,{children:[p==="bottom"&&o&&e.jsx(L,{text:a}),e.jsx(je,{}),p==="top"&&o&&e.jsx(L,{text:a})]});return e.jsx(I,{className:"theme-universal",style:{backgroundColor:"#d89696"},children:e.jsxs(U,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(be,{}),c==="top"&&u("top"),e.jsx(we,{}),e.jsx(ye,{}),c!=="top"&&u("bottom")]})})}export{Le as default};
//# sourceMappingURL=index.C9ms3Bb8.BOeqwqsg.js.map
